<!DOCTYPE html>
<html>
    <head>
        <meta charset="UTF-8" />
        <title>Insert title here.</title>
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <link rel="stylesheet" href="/css/reset.css" />
        <link rel="stylesheet" href="/css/common.css" />
        <link rel="stylesheet" href="/css/top-nav.css" />
        <link
            rel="stylesheet"
            href="/css/pages/tech-info/great-tech-detail.css"
        />
        <script type="text/javascript" src="/js/components/button.js"></script>
        <script
            type="text/javascript"
            src="/js/components/pages/trl.js"
        ></script>
        <script type="text/javascript" src="/js/components/top-nav.js"></script>
    </head>
    <body>
        <top-nav></top-nav>
        <div class="content-wrapper">
            <span class="title-bd"> - </span>
            <div class="top-content-wrapper">
                <div>
                    <img src="" alt="" />
                </div>
                <div class="shadow-01">
                    <div>
                        <div class="body-me">
                            <span>기술명</span>
                            <span>-</span>
                        </div>
                        <div class="body-me">
                            <span>특화분야</span>
                            <span>-</span>
                        </div>
                        <div class="body-me">
                            <span>기술분야</span>
                            <span>-</span>
                        </div>
                        <div class="body-me">
                            <span>보유기관</span>
                            <span>-</span>
                        </div>
                        <div class="body-me">
                            <span>연구자</span>
                            <span>-</span>
                        </div>
                        <div class="body-me">
                            <span>거래조건</span>
                            <span>-</span>
                        </div>
                    </div>
                    <div>
                        <button-default
                            onclick="location.href='/html/pages/great-tech-inquiry.html'"
                            state="disabled"
                            >문의하기</button-default
                        >
                        <button-default style_="secondary"
                            >기술소개서</button-default
                        >
                    </div>
                </div>
            </div>
            <div class="subcontent-wrapper">
                <span class="title-bd">기술활용분야</span>
                <ul class="body-me">
                    <li>-</li>
                </ul>
            </div>

            <div class="subcontent-wrapper">
                <span class="title-bd">시장동향</span>
                <ul class="body-me">
                    <li>-</li>
                </ul>
            </div>

            <div class="subcontent-wrapper">
                <span class="title-bd"> 특허정보 </span>
                <span class="body-me"> - </span>
            </div>

            <div class="subcontent-wrapper">
                <span class="title-bd">기술완성도(TRL)</span>
                <div class="trl-wrapper">
                    <trl-container
                        achievement="0"
                        style="width: 100%"
                    ></trl-container>
                </div>
            </div>

            <div class="subcontent-wrapper">
                <div class="button-wrapper">
                    <button-default
                        style_="outline"
                        onclick="location.href='/html/pages/tech-info.html'"
                        >목록으로</button-default
                    >
                </div>
            </div>
        </div>
        <script>
            let post;
            const contentWrapper = document.querySelector(
                'div.content-wrapper',
            );
            const get = (str) => (str === '' ? '-' : str);

            const render = () => {
                contentWrapper.innerHTML = `
            <span class="title-bd"> ${post.title}</span>
            <div class="top-content-wrapper">
                <div>
                    <img src="https://innopolis-katech.re.kr/${
                        post.img
                    }" alt="" />
                </div>
                <div class="shadow-01">
                    <div>
                        <div class="body-me">
                            <span>기술명</span>
                            <span>${get(post.detail.기술명)}</span>
                        </div>
                        <div class="body-me">
                            <span>특화분야</span>
                            <span>${get(post.detail.특화분야)}</span>
                        </div>
                        <div class="body-me">
                            <span>기술분야</span>
                            <span>${get(post.detail.기술분야)}</span>
                        </div>
                        <div class="body-me">
                            <span>보유기관</span>
                            <span>${get(post.detail.보유기관및연구자)}</span>
                        </div>
                        <div class="body-me">
                            <span>연구자</span>
                            <span>-</span>
                        </div>
                        <div class="body-me">
                            <span>거래조건</span>
                            <span>${get(post.detail.거래조건)}</span>
                        </div>
                    </div>
                    <div>
                        <button-default
                            onclick="location.href='/html/pages/great-tech-inquiry.html'"
                            state="disabled"
                            >문의하기</button-default
                        >
                        <button-default style_="secondary"
                            onclick="window.open('https://innopolis-katech.re.kr/${
                                post.기술소개서
                            }')"
                            >기술소개서</button-default
                        >
                    </div>
                </div>
            </div>
            <div class="subcontent-wrapper">
                <span class="title-bd">기술활용분야</span>
                <ul class="body-me">
                    ${post.기술활용분야.reduce((acc, data) => {
                        if (data === '' || data === undefined) {
                            return acc;
                        }
                        return (
                            acc +
                            `
                            <li>${
                                data.charAt(0) === '○' ||
                                data.charAt(0) === 'ㅇ'
                                    ? data.slice(2)
                                    : data
                            }</li>
                        `
                        );
                    }, '')}
                </ul>
            </div>

            <div class="subcontent-wrapper">
                <span class="title-bd">시장동향</span>
                <ul class="body-me">
                    ${post.시장동향.reduce((acc, data) => {
                        if (data === '') {
                            return acc;
                        }
                        return (
                            acc +
                            `
                            <li>${
                                data.charAt(0) === '○' ||
                                data.charAt(0) === 'ㅇ'
                                    ? data.slice(2)
                                    : data
                            }</li>
                        `
                        );
                    }, '')}
                </ul>
            </div>

            <div class="subcontent-wrapper">
                <span class="title-bd"> 특허정보 </span>
                <span class="body-me">
                    ${post.특허정보}
                </span>
            </div>

            <div class="subcontent-wrapper">
                <span class="title-bd">기술완성도(TRL)</span>
                <div class="trl-wrapper">
                    <trl-container
                        achievement="${post.type.split(' ')[1] ?? 0}"
                        style="width: 100%"
                    ></trl-container>
                </div>
            </div>

            <div class="subcontent-wrapper">
                <div class="button-wrapper">
                    <button-default
                        style_="outline"
                        onclick="location.href='/html/pages/tech-info.html?tab=1'"
                        >목록으로</button-default
                    >
                </div>
            </div>
                `;
            };
            window.onload = async () => {
                const urlParams = new URLSearchParams(window.location.search);
                const index = urlParams.get('idx');
                const res = await fetch(
                    '/resources/pages/tech-info/great-tech.json',
                );
                const posts = await res.json();
                post = posts[index];
                render();
            };
        </script>
    </body>
</html>
